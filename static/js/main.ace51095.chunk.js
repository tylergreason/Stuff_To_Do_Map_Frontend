(this.webpackJsonpstdm_frontend=this.webpackJsonpstdm_frontend||[]).push([[0],{30:function(e,t,a){e.exports=a(42)},35:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),i=(a(35),a(3)),s=a(4),l=a(5),u=a(6),m=a(9),d=a(2),p="https://stdm-backend.herokuapp.com",h=function(){return{type:"LOGOUT"}},f=function(e,t){return function(a){fetch("".concat(p,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?t(e):e.token&&(localStorage.setItem("auth_token",e.token),t(e),a({type:"LOGIN",user:e.user}))})).catch((function(e){console.error("Error:",e)}))}},g=a(10),E=function(e){return e.response.error?"string"===typeof e.response.error?r.a.createElement("ul",{className:"serverResponseList error"},r.a.createElement("li",{className:"serverResponseItem"},e.response.error)):e.response.error.length>0&&"object"===typeof e.response.error?r.a.createElement("ul",{className:"serverResponseList error"},e.response.error.map((function(e){return r.a.createElement("li",{className:"serverResponseItem"},e)}))):void 0:e.response.success?r.a.createElement("div",{className:"serverResponse success"},e.response.success):r.a.createElement(r.a.Fragment,null)},b=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",returnMessage:[]},e.handleInput=function(t){e.setState(Object(m.a)({},t.target.name,t.target.value))},e.returnMessage=function(t){e.setState({returnMessage:t})},e.handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.login(a,e.returnMessage)},e.redirectToHomeIfLoggedIn=function(){!0===e.props.loggedIn&&e.props.history.push("/")},e.renderLoginForm=function(){return r.a.createElement("div",{className:"informationBox middlePageBox"},r.a.createElement("h2",null," Login "),r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:e.handleInput,value:e.state.email}),r.a.createElement("br",null),r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:e.handleInput,value:e.state.password}),r.a.createElement(E,{response:e.state.returnMessage}),r.a.createElement("button",{id:"submit",type:"submit",value:"Submit"},"Login")))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.redirectToHomeIfLoggedIn(),this.renderLoginForm())}}]),a}(n.Component),v=Object(g.g)(Object(d.b)((function(e){return{loggedIn:e.user.loggedIn}}),{login:f})(b)),y=a(1),A=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:{first_name:"",last_name:"",username:"",city:"",state:"",country:"",email:"",password:"",password_confirmation:""},returnMessage:""},e.redirectToHomeIfLoggedIn=function(){!0===e.props.loggedIn&&e.props.history.push("/")},e.handleInput=function(t){e.setState(Object(y.a)({},e.state,{user:Object(y.a)({},e.state.user,Object(m.a)({},t.target.name,t.target.value))}))},e.returnMessage=function(t){e.setState({returnMessage:t})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.email&&e.state.password===e.state.password_confirmation&&e.props.signUp(e.state.user,e.returnMessage)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"informationBox middlePageBox"},this.redirectToHomeIfLoggedIn(),r.a.createElement("form",null,r.a.createElement("label",null,"First Name: "),r.a.createElement("input",{name:"first_name",value:this.state.user.first_name,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Last Name: "),r.a.createElement("input",{name:"last_name",value:this.state.user.last_name,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Username: "),r.a.createElement("input",{name:"username",value:this.state.user.username,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Email: "),r.a.createElement("br",null),r.a.createElement("input",{name:"email",value:this.state.user.email,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"City: "),r.a.createElement("br",null),r.a.createElement("input",{name:"city",value:this.state.user.city,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"State: "),r.a.createElement("br",null),r.a.createElement("input",{name:"state",value:this.state.user.state,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Country: "),r.a.createElement("br",null),r.a.createElement("input",{name:"country",value:this.state.user.country,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Password: "),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",onChange:this.handleInput,value:this.state.user.password}),r.a.createElement("br",null),r.a.createElement("label",null,"Confirm Password: "),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password_confirmation",onChange:this.handleInput,value:this.state.user.password_confirmation}),r.a.createElement("br",null),r.a.createElement(E,{response:this.state.returnMessage}),r.a.createElement("button",{id:"submit",type:"submit",onClick:this.handleSubmit},"Sign Up")))}}]),a}(n.Component),w=Object(g.g)(Object(d.b)((function(e){return{loggedIn:e.user.loggedIn}}),{login:f,logout:h,signUp:function(e,t){return function(a){fetch("".concat(p,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?t(e):e.token&&(localStorage.setItem("auth_token",e.token),t(e),a({type:"LOGIN",user:e.user}))})).catch((function(e){console.error("Error:",e)}))}}})(A)),C=function(e){return r.a.createElement(r.a.Fragment,null,function(e){return localStorage.getItem("auth_token")?e.render():r.a.createElement(g.a,{to:"/"})}(e))},k=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={path:e.props.location.pathname},e.componentDidMount=function(){e.removeHighlightClass();var t=e.allNavBarButtons();e.addHighlightToButton(t)},e.componentDidUpdate=function(){e.removeHighlightClass();var t=e.allNavBarButtons();e.addHighlightToButton(t)},e.addHighlightToButton=function(t){t.forEach((function(t){t.value===e.state.path&&t.classList.add("highlight")}))},e.handleNavbarClick=function(t){var a=t.target.value;e.props.history.push(a),e.removeHighlightClass(),t.target.classList.add("highlight"),console.log(t.target.classList),e.setState({path:t.target.value})},e.logout=function(){localStorage.clear(),e.props.logout(),e.setState({path:"map"})},e.removeHighlightClass=function(){e.allNavBarButtons().forEach((function(e){return e.classList.remove("highlight")}))},e.allNavBarButtons=function(){var e=document.getElementsByClassName("NavBarButton");return Array.from(e)},e.renderLoggedInNavbar=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"NavBarButton highlight",value:"/",name:"map",onClick:e.handleNavbarClick},"Map"),r.a.createElement("button",{className:"NavBarButton",value:"/about",name:"/about",onClick:e.handleNavbarClick},"About"),r.a.createElement("button",{className:"NavBarButton",value:"/myAttractions",name:"myAttractions",onClick:e.handleNavbarClick},"My Attractions"),r.a.createElement("button",{className:"NavBarButton",value:"/myAccount",name:"myAccount",onClick:e.handleNavbarClick},"My Account"),r.a.createElement("button",{className:"NavBarButton",value:"/logout",name:"logout",onClick:e.logout},"Log Out"))},e.renderLoggedOutNavbar=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"NavBarButton",value:"/",name:"map",onClick:e.handleNavbarClick},"Map"),r.a.createElement("button",{className:"NavBarButton",value:"/about",name:"about",onClick:e.handleNavbarClick},"About"),r.a.createElement("button",{className:"NavBarButton",value:"/signup",name:"signUp",onClick:e.handleNavbarClick},"Sign Up"),r.a.createElement("button",{className:"NavBarButton",value:"/login",name:"login",onClick:e.handleNavbarClick},"Log In"))},e.renderNavbar=function(){return e.props.loggedIn?e.renderLoggedInNavbar():!1===e.props.loggedIn?e.renderLoggedOutNavbar():void 0},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"NavbarParent"},r.a.createElement("h1",{className:"title"},"Stuff To Do Map"),r.a.createElement("span",{className:"NavBar"},this.renderNavbar()))}}]),a}(n.Component),O=Object(g.g)(Object(d.b)((function(e){return{loggedIn:e.user.loggedIn}}),{logout:h})(k)),T=function(){return r.a.createElement("div",{className:"About  informationBox animated fadeIn fast"},r.a.createElement("h3",null,"Hi, and thanks for visiting my site!"),r.a.createElement("div",null,"This web application was built for my final project for Flatiron's Software Engineering program. It was made to show off what we learned during our 12 weeks leading up to beginning the project."),r.a.createElement("h3",null,"How to Use"),r.a.createElement("div",null,"Click ",r.a.createElement("label",null,"Map")," in the navigation bar above to view the map of attractions. There are two kinds of attractions: user attractions and OTM attractions. User attractions are those uploaded by users like you. OTM attractions are attractions queried from the Open Trip Map API. They currently only show historical districts.",r.a.createElement("br",null),"If you would like to contribute, sign up for an account by clicking ",r.a.createElement("label",null,"Sign Up")," in the navigation bar above. Once you have signed up, click ",r.a.createElement("label",null,"My Attractions"),", then New Attraction to make a new attraction. Fill in the appropriate fields, and click on the map where your attraction should be located. Click Submit, and your attraction will now appear for others to see!",r.a.createElement("br",null),"User attractions can receive ratings from users. This is to ensure any attractions that aren't up to the communities standards appear as such. To review an attraction, simply click on its listing or marker on the ",r.a.createElement("label",null,"Map")," page, and submit your review and rating at the bottom!"),r.a.createElement("h3",null,"More About the Author and Project"),r.a.createElement("div",null,"Stuff To Do Map was created with the purpose of helping people find things to do around them. I was inspired to make Stuff To Do Map after visiting cities the world over and struggling to ",r.a.createElement("em",null,"easily")," find things to do near me in each city. While I found numerous sites that would show me what the best expensive tours or restaurants were, I never found a site that would show me exactly what I wanted: historical sites within walking distance.",r.a.createElement("br",null),"Stuff To Do Map is exactly what I wanted to have back then, and what I will use while traveling in the future. I hope you give it a go the next time you're out and about! You can find my contact information below if you would like to give feedback on how to improve Stuff To Do Map."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/tylergreason/Stuff_To_Do_Map_Frontend"},"Stuff To Do Map Frontend Repo")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/tylergreason/Stuff_To_Do_Map_Backend"},"Stuff To Do Map Backend Repo")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/tylergreason/"},"My Github")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://twitter.com/GreasonTyler"},"My Twitter")),r.a.createElement("li",null,r.a.createElement("a",{href:"mailto:tylergreason@gmail.com"},"tylergreason@gmail.com"))))},I=function(e){return r.a.createElement("button",{name:e.name,onClick:e.onClick},e.text)},j="https://stdm-backend.herokuapp.com",S=function(e){return function(t){t({type:"HIGHLIGHT_ATTRACTION",attractionId:e})}},N=function(e){Array.from(document.getElementsByClassName("icon")).forEach((function(e){return e.classList.remove("hovered")}));var t=document.querySelector("[id$='con".concat(e,"']"));t&&t.classList.add("hovered")},M=function(e,t){Array.from(document.getElementsByClassName(e)).forEach((function(e){return e.classList.remove("hovered")})),document.getElementById("".concat(e).concat(t)).classList.add("hovered")},_=function(e){var t=document.getElementById(e);t&&t.scrollIntoView()},L=function(e){var t="",a="",n="",o="",c="";return void 0!==e.house_number&&(t=e.house_number),e.road&&(a=e.road+", "),e.city&&(n=e.city+", "),e.state&&(o=e.state+", "),e.country&&(c=e.country),r.a.createElement("span",{className:"address"},t," ",a," ",n," ",o," ",c)},B=function(e){return e.average_rating?r.a.createElement("span",{className:"rating"}," - ",e.average_rating,"\u2b50\ufe0f"):r.a.createElement("span",{className:"rating"}," - No Reviews Yet")},D=a(7),R=a.n(D),x=function(e){R.a.Control.Location=R.a.Control.extend({onAdd:function(){var t=R.a.DomUtil.create("button");return t.innerText="gps_fixed",R.a.DomEvent.on(t,"click",(function(t){R.a.DomEvent.stopPropagation(t),e.locate({setView:!0})})),R.a.DomUtil.addClass(t,"locationButton"),R.a.DomUtil.addClass(t,"material-icons"),t},onRemove:function(){}});var t;return(t={position:"topleft"},new R.a.Control.Location(t)).addTo(e)},U=function(){},P=function(e){U=e,console.log(U)},F=Object(d.b)(null,{deleteAttraction:function(e){return function(t){fetch("".concat(j,"/attractions/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token}}).then((function(e){return e.json()})).then((function(e){console.log(e),t({type:"DELETE_ATTRACTION",myAttractions:e})})).catch((function(e){console.error("Error:",e)}))}}})((function(e){return r.a.createElement("div",{className:"AttractionListCard animated fadeIn faster",id:"AttractionListCard".concat(e.attraction.id),onClick:function(){N(e.attraction.id),M("AttractionListCard",e.attraction.id),U.setView({lat:e.attraction.lat,lng:e.attraction.lng})}},r.a.createElement("h4",{className:"name"},e.attraction.name),B(e.attraction),L(e.attraction),r.a.createElement("p",{className:"description"},e.attraction.description),r.a.createElement("br",null),r.a.createElement(I,{text:"\ud83d\uddd1",name:e.attraction.id,onClick:function(t){t.preventDefault(),console.log(t.target.name),e.deleteAttraction(t.target.name)}}),r.a.createElement(I,{text:"\u270f\ufe0f",name:e.attraction.id,onClick:e.editClick}))})),W=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={attraction:"",serverResponse:[]},e.handleInput=function(t){e.setState(Object(y.a)({},e.state,{attraction:Object(y.a)({},e.state.attraction,Object(m.a)({},t.target.name,t.target.value))}))},e.handleSubmit=function(t){t.preventDefault(),e.props.updateAttraction(e.state.attraction,e.setServerResponse)},e.componentDidMount=function(){void 0!==e.props.attraction&&e.setState({attraction:e.props.attraction})},e.componentDidUpdate=function(){"Success"===e.state.serverResponse&&e.props.backToList()},e.setServerResponse=function(t){e.setState({serverResponse:t})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:" AttractionListCard editAttractionForm"},r.a.createElement("form",null,r.a.createElement("label",null,"Name: "),r.a.createElement("br",null),r.a.createElement("input",{name:"name",value:this.state.attraction.name||"",onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Description:"),r.a.createElement("br",null),r.a.createElement("textarea",{rows:"4",name:"description",value:this.state.attraction.description||"",onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E,{response:this.state.serverResponse}),r.a.createElement("button",{type:"submit",onClick:this.handleSubmit},"Save Changes")))}}]),a}(n.Component),H=Object(d.b)(null,{updateAttraction:function(e,t){return function(a){fetch("".concat(j,"/attractions/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?t(e):(a({type:"UPDATE_ATTRACTION",myAttractions:e}),t("Success"))})).catch((function(e){console.error("Error:",e)}))}}})(W),G=function(e){return console.log(e),function(t){fetch("".concat("https://stdm-backend.herokuapp.com","/attractions/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),t({type:"GET_ATTRACTION",attraction:e})})).catch((function(e){console.error("Error:",e)}))}},V=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={attraction:{name:"",description:"",house_number:"",road:"",city:"",state:"",country:"",lat:"",lng:""},returnMessage:[]},e.componentDidUpdate=function(t){if(void 0!==e.props.newAttraction&&t.newAttraction!==e.props.newAttraction)return console.log(e.props.newAttraction),console.log("attraction address updated"),e.updateNewAttractionAddress(e.props.newAttraction);e.state.returnMessage.success&&e.props.backToList()},e.updateNewAttractionAddress=function(t){var a={},n=["house_number","road","city","state","country","lat","lng"];n.forEach((function(t){return a[t]=e.state.attraction[t]})),n.forEach((function(n){void 0!==t[n]&&""!==t[n]&&t[n]!==e.state.attraction[n]&&(a[n]=t[n])})),e.setState(Object(y.a)({},e.state,{attraction:Object(y.a)({},e.state.attraction,{house_number:a.house_number,road:a.road,city:a.city,state:a.state,country:a.country,lat:a.lat,lng:a.lng})}))},e.handleInput=function(t){e.setState(Object(y.a)({},e.state,{attraction:Object(y.a)({},e.state.attraction,Object(m.a)({},t.target.name,t.target.value))}))},e.returnMessage=function(t){e.setState({returnMessage:t})},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state.attraction),e.props.addAttraction(e.state.attraction,e.returnMessage)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"informationBox newAttractionForm"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Name"),r.a.createElement("br",null),r.a.createElement("input",{name:"name",value:this.state.attraction.name,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Description"),r.a.createElement("br",null),r.a.createElement("textarea",{rows:"4",name:"description",value:this.state.attraction.description,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Building Number"),r.a.createElement("br",null),r.a.createElement("input",{name:"house_number",value:this.state.attraction.house_number,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Street"),r.a.createElement("br",null),r.a.createElement("input",{name:"road",value:this.state.attraction.road,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"City"),r.a.createElement("br",null),r.a.createElement("input",{name:"city",value:this.state.attraction.city,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"State"),r.a.createElement("br",null),r.a.createElement("input",{name:"state",value:this.state.attraction.state,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Country"),r.a.createElement("br",null),r.a.createElement("input",{name:"country",value:this.state.attraction.country,onChange:this.handleInput}),r.a.createElement("br",null),r.a.createElement(E,{response:this.state.returnMessage}),r.a.createElement("button",{type:"submit"},"Save Changes")))}}]),a}(n.Component),z=Object(d.b)((function(e){return{newAttraction:e.map.newAddress}}),{addAttraction:function(e,t){return console.log("addAttraction fired "),function(a){fetch("".concat("https://stdm-backend.herokuapp.com","/attractions/"),{method:"POST",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?t(e):(t({success:"Success"}),a({type:"ADD_ATTRACTION",myAttractions:e}))}))}}})(V),Y=(a(41),R.a.divIcon({className:"materialMapIcon",html:"<span class='material-icons userIcon'>place</span>",iconAnchor:[12,30]}),function(e,t){var a="\n                                <div class='userIconWrapper'>\n                                    <div class='material-icons userIcon icon'  id=attractionIcon".concat(t,">\n                                        place\n                                    </div>\n                                    <span class='iconText'>\n                                        ").concat(e,'\n                                    </span>\n                                    <span className="iconTextWrapper">\n                                    </span>   \n                                </div>\n                                ');return R.a.divIcon({className:"materialMapIcon",html:a,iconSize:[36,36],iconAnchor:[0,18]})}),J=function(e,t){var a="otmIcon".concat(t),n="\n                    <div class='userIconWrapper'>\n                    <div class='material-icons userIcon icon otmIcon'  id=".concat(a,">\n                    place</div>\n                    <span class='iconText'>").concat(e,"</span>\n                    </div>\n                    ");return R.a.divIcon({className:"materialMapIcon",html:n,iconSize:[36,36],iconAnchor:[0,18]})},X=R.a.divIcon({className:"materialMapIcon",html:"<span class='material-icons editIcon'>\n                            edit_location\n                        </span>\n                        <span class='markerShadow material-icons'>\n                            \x3c!-- trip_origin --\x3e\n                        </span>\n                        ",iconAnchor:[12,30]}),Z=[],K=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={map:""},e.componentDidMount=function(){e.map=e.createMap(),e.attractionLayer=R.a.layerGroup().addTo(e.map),e.editLayer=R.a.layerGroup().addTo(e.map),P(e.map)},e.componentDidUpdate=function(t){t.attractions!==e.props.attractions&&(e.renderAttractionMarkers(e.state.map),e.editLayer.clearLayers())},e.onMapClick=function(t){if("new"===e.props.formToRender){var a=t.latlng.wrap().lat,n=t.latlng.wrap().lng;console.log("".concat(a," and ").concat(n)),fetch("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(a,"&lon=").concat(n)).then((function(e){return e.json()})).then((function(t){e.props.fillAttractionForm(t.address,t.lat,t.lon)})),e.editLayer.clearLayers(),e.marker=R.a.marker([a,n],{icon:X}),e.marker.addTo(e.editLayer)}},e.renderAttractionMarkers=function(){if(e.attractionLayer.clearLayers(),e.props.attractions)return e.props.attractions.map((function(t){var a=t.lat,n=t.lng;return e.marker=R.a.marker([a,n],{icon:Y("".concat(t.name),"".concat(t.id))}),e.marker.on("click",e.handleMarkerClick),e.marker.id=t.id,e.marker.addTo(e.attractionLayer)}))},e.handleMarkerClick=function(t){if("list"===e.props.formToRender){N(t.target.id),M("AttractionListCard",t.target.id);var a="AttractionListCard".concat(t.target.id);document.getElementById(a).scrollIntoView()}},e.createMap=function(){var t=R.a.map("myMap").setView([35,-100],4);return R.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:20,minZoom:1,preferCanvas:!0,zoomSnap:1,zoomDelta:.1,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoidHlsZXJncmVhc29uIiwiYSI6ImNrOGVnbzc2ODE0dWczbG8xYXY5eWE4Y3IifQ.dvMx_fsMixzS0VfGmR-fsA"}).addTo(t),R.a.Map.addInitHook((function(){Z.push(this),this.getContainer()._leaflet_map=this})),e.setState({map:t,southWestBounds:t.getBounds()._southWest,northEastBounds:t.getBounds()._northEast}),x(t),R.a.control.scale().addTo(t),t.on("click",e.onMapClick),t},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"myMap",className:"animated fadeIn map"}))}}]),a}(n.Component),q=Object(d.b)(null,{fillAttractionForm:function(e,t,a){return{type:"FILL_ATTRACTION_FORM",newAddress:Object(y.a)({},e,{lat:t,lng:a})}}})(K),Q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={formToRender:"list"},e.componentDidMount=function(){e.props.getMyAttractions()},e.renderMyAttractions=function(){if(void 0!==e.props.myAttractions)return r.a.createElement("div",null,e.props.myAttractions.map((function(t){return r.a.createElement(F,{key:t.id,attraction:t,editClick:e.handleAttractionEditClick})})))},e.handleAttractionEditClick=function(t){var a=e.props.myAttractions.filter((function(e){return e.id===parseInt(t.target.name)}));e.setState({formToRender:"edit",attractionToEdit:a[0]})},e.handleNewAttractionClick=function(t){N(),t.preventDefault(),e.setState({formToRender:"new"})},e.renderAttractionEditForm=function(){return r.a.createElement(H,{attraction:e.state.attractionToEdit,backToList:e.backToList})},e.renderNewAttractionForm=function(){return r.a.createElement("div",{className:"newAttractionWrapper"},r.a.createElement("div",null,"Click on the map where your attraction should appear. The address will populate the fields to the left. You can then further edit the attraction."),r.a.createElement(z,{backToList:e.backToList}))},e.backToList=function(){e.setState({formToRender:"list"})},e.renderStateForm=function(){return"list"===e.state.formToRender?e.renderMyAttractions():"edit"===e.state.formToRender?e.renderAttractionEditForm():"new"===e.state.formToRender?e.renderNewAttractionForm():void 0},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"AttractionList"},"list"===this.state.formToRender?r.a.createElement("button",{onClick:this.handleNewAttractionClick},"New Attraction"):r.a.createElement(r.a.Fragment,null),"list"!==this.state.formToRender?r.a.createElement("button",{onClick:this.backToList},"Go Back"):r.a.createElement(r.a.Fragment,null),this.renderStateForm()),r.a.createElement(q,{formToRender:this.state.formToRender,attractions:this.props.myAttractions}))}}]),a}(n.Component),$=Object(d.b)((function(e){return{myAttractions:e.map.myAttractions}}),{getMyAttractions:function(){return function(e){fetch("".concat(j,"/myAttractions"),{method:"GET",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token}}).then((function(e){return e.json()})).then((function(t){console.log(t),e({type:"GET_MY_ATTRACTIONS",myAttractions:t})})).catch((function(e){console.error("Error:",e)}))}}})(Q),ee="https://stdm-backend.herokuapp.com",te=function(){return console.log("get user called "),function(e){fetch("".concat(ee,"/myAccount"),{method:"GET",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token}}).then((function(e){return e.json()})).then((function(t){console.log(t),e({type:"GET_USER",user:t})})).catch((function(e){console.error("Error:",e)}))}},ae=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={user:{},returnMessage:""},e.returnMessage=function(t){e.setState({returnMessage:t})},e.handleInput=function(t){t.preventDefault(),e.setState(Object(y.a)({},e.state,{user:Object(y.a)({},e.state.user,Object(m.a)({},t.target.name,t.target.value))}))},e.renderChangePasswordForm=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Change Password"),r.a.createElement("form",{className:"informationBox"},r.a.createElement("label",null,"Current Password: "),r.a.createElement("br",null),r.a.createElement("input",{name:"password",type:"password",value:e.state.user.password||"",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"New Password: "),r.a.createElement("br",null),r.a.createElement("input",{name:"new_password",type:"password",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Confirm New Password: "),r.a.createElement("br",null),r.a.createElement("input",{name:"password_confirmation",type:"password",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement(E,{response:e.state.returnMessage}),r.a.createElement("button",{type:"submit",onClick:e.handleUpdatePasswordSubmit},"Change Password")))},e.handleUpdatePasswordSubmit=function(t){t.preventDefault();var a=Object(y.a)({},e.state.user,{id:e.props.userId});console.log(a),e.props.updatePassword(a,e.returnMessage)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"middlePageBox"},this.renderChangePasswordForm())}}]),a}(n.Component),ne=Object(d.b)(null,{updatePassword:function(e,t){var a={id:e.id,current_password:e.password,password:e.new_password,password_confirmation:e.password_confirmation};return function(e){fetch("".concat(ee,"/updatePassword/"),{method:"PATCH",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token},body:JSON.stringify({user:a})}).then((function(e){return e.json()})).then((function(a){console.log(a),a.error||e({type:"UPDATE_PASSWORD"}),t(a)})).catch((function(e){console.error("Error:",e)}))}}})(ae),re=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={returnMessage:"",email:""},e.returnMessage=function(t){e.setState({returnMessage:t})},e.handleInput=function(t){t.preventDefault(),e.setState(Object(y.a)({},e.state,{email:Object(y.a)({},e.state.email,Object(m.a)({},t.target.name,t.target.value))}))},e.renderUpdateEmailForm=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Update Email Address"),r.a.createElement("form",{className:"informationBox"},r.a.createElement("label",null,"Current Email Address"),r.a.createElement("label",null," - ",e.props.currentEmail),r.a.createElement("br",null),r.a.createElement("label",null,"New Email: "),r.a.createElement("br",null),r.a.createElement("input",{name:"new_email",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Confirm New Email: "),r.a.createElement("br",null),r.a.createElement("input",{name:"email_confirmation",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"*Current Password: "),r.a.createElement("br",null),r.a.createElement("input",{name:"current_password",type:"password",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement(E,{response:e.state.returnMessage}),r.a.createElement("button",{type:"submit",onClick:e.handleUpdateEmailSubmit},"Update Email Address")))},e.handleUpdateEmailSubmit=function(t){t.preventDefault();var a=Object(y.a)({},e.state.email,{id:e.props.userId});console.log(a),e.props.updateEmail(a,e.returnMessage),e.props.getUser()},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"middlePageBox"},this.renderUpdateEmailForm())}}]),a}(n.Component),oe=Object(d.b)((function(e){return{currentEmail:e.user.user.email}}),{updateEmail:function(e,t){return function(a){fetch("".concat(ee,"/updateEmail/"),{method:"PATCH",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?t(e):(t(e),a({type:"UPDATE_EMAIL",email:e.email}))})).catch((function(e){console.error("Error:",e)}))}},getUser:te})(re),ce=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={user:e.props.user,returnMessage:""},e.componentDidUpdate=function(t){t.user!==e.props.user&&!0!==e.state.receivedProps&&(console.log("user info updated"),e.setState({user:e.props.user,receivedProps:!0}))},e.returnMessage=function(t){e.setState({returnMessage:t})},e.handleInput=function(t){t.preventDefault(),e.setState(Object(y.a)({},e.state,{user:Object(y.a)({},e.state.user,Object(m.a)({},t.target.name,t.target.value))}))},e.handleUpdateInfoSubmit=function(t){t.preventDefault();var a=Object(y.a)({},e.state.user);console.log(a),e.props.updateUser(a,e.returnMessage)},e.renderUpdateInfoForm=function(){return r.a.createElement("div",{className:"middlePageBox"},r.a.createElement("label",null,"Update Account Information"),r.a.createElement("form",{className:"informationBox"},r.a.createElement("label",null,"First Name: "),r.a.createElement("br",null),r.a.createElement("input",{name:"first_name",value:e.state.user.first_name||"",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Last Name: "),r.a.createElement("br",null),r.a.createElement("input",{name:"last_name",value:e.state.user.last_name||"",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Username: "),r.a.createElement("br",null),r.a.createElement("input",{name:"username",value:e.state.user.username||"",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"City: "),r.a.createElement("br",null),r.a.createElement("input",{name:"city",value:e.state.user.city||"",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"State: "),r.a.createElement("br",null),r.a.createElement("input",{name:"state",value:e.state.user.state||"",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Country: "),r.a.createElement("br",null),r.a.createElement("input",{name:"country",value:e.state.user.country||"",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement("label",null,"Current Password: "),r.a.createElement("br",null),r.a.createElement("input",{name:"password",type:"password",value:e.state.user.password||"",onChange:e.handleInput}),r.a.createElement("br",null),r.a.createElement(E,{response:e.state.returnMessage}),r.a.createElement("button",{onClick:e.handleUpdateInfoSubmit},"Update Account Information")))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderUpdateInfoForm())}}]),a}(n.Component),ie=Object(d.b)((function(e){return{user:e.user.user}}),{updateUser:function(e,t){return function(a){fetch("".concat(ee,"/users/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error||a({type:"UPDATE_USER",user:e.user}),t(e)})).catch((function(e){console.error("Error:",e)}))}}})(ce),se=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={password:"",save_attractions:null,returnMessage:""},e.componentDidUpdate=function(){e.state.returnMessage.success&&(localStorage.clear(),e.props.history.push("/login"))},e.returnMessage=function(t){e.setState({returnMessage:t})},e.handleInput=function(t){e.setState(Object(m.a)({},t.target.name,t.target.value))},e.handleKeepAttractionsSelect=function(t){"yes"===t.target.value?e.setState({save_attractions:!0}):e.setState({save_attractions:!1})},e.renderPasswordInputs=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Password: "),r.a.createElement("input",{name:"password",type:"password",value:e.state.password||"",onChange:e.handleInput}))},e.renderUserChoice=function(){return!0===e.state.save_attractions?r.a.createElement("div",null,"Yes, save my attractions for others to see!"):!1===e.state.save_attractions?r.a.createElement("div",null,"No, I want to delete all my attractions along with my account!"):void 0},e.renderKeepAttractionsSelect=function(){return r.a.createElement("div",null,r.a.createElement("div",null,"Would you like to keep the attractions or reviews you have published for others to continue to see?"),r.a.createElement("button",{value:"yes",onClick:e.handleKeepAttractionsSelect},"Yes"),r.a.createElement("button",{value:"no",onClick:e.handleKeepAttractionsSelect},"No"))},e.renderDeleteAccountButton=function(){return r.a.createElement("button",{onClick:e.handleDeleteAccountSubmit},"Delete Account")},e.handleDeleteAccountSubmit=function(t){t.preventDefault();var a={id:e.props.userId,password:e.state.password,save_attractions:e.state.save_attractions};e.props.deleteUser(a,e.returnMessage)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"middlePageBox"},r.a.createElement("label",null,"Delete Account"),r.a.createElement("div",{className:"informationBox"},this.renderKeepAttractionsSelect(),this.renderUserChoice(),this.renderPasswordInputs(),r.a.createElement(E,{response:this.state.returnMessage}),this.renderDeleteAccountButton()))}}]),a}(n.Component),le=Object(g.g)(Object(d.b)(null,{deleteUser:function(e,t){return console.log({user:e}),function(a){fetch("".concat(ee,"/users/").concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error||a({type:"DELETE_USER",user:e}),t(e)})).catch((function(e){console.error("Error:",e)}))}}})(se)),ue=Object(d.b)((function(e){return{user:e.user.user}}))((function(e){return console.log("myAccount mounted"),r.a.createElement("div",{className:"MyAttractionList"},r.a.createElement(ie,null),r.a.createElement(ne,{userId:e.user.id}),r.a.createElement(oe,{userId:e.user.id}),r.a.createElement(le,{userId:e.user.id}))})),me=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).cardClick=function(){e.props.onClick(e.props.attraction),N(e.props.attraction.id)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"attractionMapListCard".concat(this.props.attraction.id),onClick:this.cardClick,className:"AttractionListCard animated fadeIn"},r.a.createElement("h4",{className:"name"},this.props.attraction.name),B(this.props.attraction),L(this.props.attraction),r.a.createElement("p",{className:"description"},this.props.attraction.description))}}]),a}(n.Component),de=Object(d.b)((function(e){return{user_id:e.user.user.id}}),{deleteReview:function(e){return function(t){fetch("".concat("https://stdm-backend.herokuapp.com","/reviews/").concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error||t({type:"DELETE_REVIEW",attraction:e.attraction})}))}}})((function(e){return r.a.createElement("div",{className:"ReviewCard "},r.a.createElement("span",null,e.review.user_first_name," ",e.review.user_last_name," said:"),r.a.createElement("span",{className:"reviewDate"},e.review.created_at),r.a.createElement("p",null,e.review.rating,r.a.createElement("span",{role:"img","aria-label":"star"},"\u2b50\ufe0f")),r.a.createElement("p",null,e.review.text),e.user_id===e.review.user_id?r.a.createElement(I,{name:"",text:"Delete",onClick:function(){return e.deleteReview(e.review)}}):r.a.createElement(r.a.Fragment,null))})),pe=function(e){return console.log(e),r.a.createElement("div",{className:"ReviewList informationBox"},e.attraction.reviews.map((function(t){return r.a.createElement(de,{attraction:e.attraction,review:t,key:t.id})})))},he=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={text:"",rating:"",returnMessage:""},e.handleInput=function(t){e.setState(Object(m.a)({},t.target.name,t.target.value))},e.handleOptionSelect=function(t){e.setState({rating:t.target.value})},e.renderNotLoggedIn=function(){if(!e.props.loggedIn)return r.a.createElement("div",null,"You must be logged in to leave a review")},e.renderReturnMessage=function(){return r.a.createElement("div",null,e.state.returnMessage)},e.returnMessage=function(t){e.setState({returnMessage:t})},e.componentDidUpdate=function(){e.state.returnMessage.success&&(e.setState({returnMessage:"",text:""}),e.clearWriteReviewArea())},e.submitReview=function(t){t.preventDefault();var a={attraction_id:e.props.attractionId,text:e.state.text,rating:e.state.rating};e.props.addReview(a,e.returnMessage)},e.clearWriteReviewArea=function(){console.log("write review fired"),document.getElementById("writeReviewTextArea").value="",document.getElementById("rating").value=""},e.renderWriteReview=function(){return r.a.createElement("form",{className:"WriteReviewCard"},r.a.createElement("label",null,"Write Review"),r.a.createElement("span",{className:"ratingSelect"},r.a.createElement("label",null,"Rating"),r.a.createElement("select",{name:"rating",onChange:e.handleOptionSelect,id:"rating"},r.a.createElement("option",{className:"ratingSelectOption",name:"rating",defaultValue:!0,value:""}),r.a.createElement("option",{name:"rating",value:"1"},"1"),r.a.createElement("option",{name:"rating",value:"2"},"2"),r.a.createElement("option",{name:"rating",value:"3"},"3"),r.a.createElement("option",{name:"rating",value:"4"},"4"),r.a.createElement("option",{name:"rating",value:"5"},"5"),r.a.createElement("option",{name:"rating",value:"6"},"6"),r.a.createElement("option",{name:"rating",value:"7"},"7"),r.a.createElement("option",{name:"rating",value:"8"},"8"),r.a.createElement("option",{name:"rating",value:"9"},"9"),r.a.createElement("option",{name:"rating",value:"10"},"10"))),r.a.createElement("textarea",{className:"informationBox writeReviewText",name:"text",onChange:e.handleInput,id:"writeReviewTextArea"}),r.a.createElement("br",null),r.a.createElement(E,{response:e.state.returnMessage}),r.a.createElement("button",{onClick:e.submitReview},"Submit Review"))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.loggedIn?this.renderWriteReview():this.renderNotLoggedIn())}}]),a}(n.Component),fe=Object(d.b)((function(e){return{loggedIn:e.user.loggedIn}}),{addReview:function(e,t){return function(a){fetch("".concat("https://stdm-backend.herokuapp.com","/reviews/"),{method:"POST",headers:{"Content-Type":"application/json","Access-Token":localStorage.auth_token},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?t(e):(t(e),a({type:"ADD_REVIEW",attraction:e.attraction}))}))}}})(he),ge=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).componentDidMount=function(){document.getElementById("attractionMapListCardLarge".concat(e.props.attraction.id)).scrollIntoView()},e.renderReviewList=function(e){if(!(e.reviews.length<1))return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Reviews"),r.a.createElement(pe,{attraction:e}))},e.renderWriteReviewCard=function(){return r.a.createElement(fe,{attractionId:e.props.attraction.id})},e.renderBackButton=function(){return r.a.createElement("button",{onClick:e.props.backClick},"Back")},e.renderAddress=function(e){return r.a.createElement("span",{className:"address"},"".concat(e.house_number||""," ").concat(e.road||"",", ").concat(e.city||"",", ").concat(e.state||"",", ").concat(e.country||""))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"AttractionListCardLarge animated",id:"attractionMapListCardLarge".concat(this.props.attraction.id)},r.a.createElement("div",{className:"AttractionListCardLargeInner"},r.a.createElement("br",null),r.a.createElement("h4",{className:"name"},this.props.attraction.name),B(this.props.attraction),L(this.props.attraction),r.a.createElement("p",{className:"description"},this.props.attraction.description),this.renderReviewList(this.props.attraction),this.renderWriteReviewCard()))}}]),a}(n.Component),Ee=Object(d.b)((function(e){return{attraction:e.attraction.attraction}}),{getAttraction:G})(ge),be=Object(d.b)(null,{})((function(e){return r.a.createElement("div",{className:"AttractionListCard animated fadeIn otmAttractionCard",key:e.attraction.id,id:"otmAttractionCardSmall".concat(e.attraction.properties.xid),onClick:function(){return e.onClick(e.attraction.properties.xid)}},r.a.createElement("h4",{className:"name"},e.attraction.properties.name),r.a.createElement("span",{className:"osmRating"}," - ",e.attraction.properties.rate,"\u2b50\ufe0f"))})),ve=function(e,t){fetch("".concat("https://stdm-backend.herokuapp.com","/otm_attractions"),{method:"GET",headers:{"Content-Type":"application/json",south:e.south,north:e.north,east:e.east,west:e.west}}).then((function(e){return e.json()})).then((function(e){console.log(e),t(e.features)})).catch((function(e){console.error("Error:",e)}))},ye=function(e,t){fetch("".concat("https://stdm-backend.herokuapp.com","/fetchWikidata"),{method:"GET",headers:{xid:e}}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){console.error("Error:",e)}))},Ae=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={wikidata:"",scrollIntoView:!1},e.componentDidMount=function(){ye(e.props.xid,e.setWikidata),console.log(e.props)},e.componentDidUpdate=function(){console.log("updated"),!1===e.state.scrollIntoView&&(_("otmAttractionCardLarge".concat(e.state.wikidata.xid)),e.setState({scrollIntoView:!0}))},e.setWikidata=function(t){e.setState({wikidata:t})},e.renderWikipediaData=function(e){if(void 0!==e&&void 0!==e.text)return r.a.createElement("p",null,e.text)},e.renderImage=function(e){return e.preview?r.a.createElement("img",{className:"otmImage",src:e.preview.source}):r.a.createElement("p",null,"No Image Available")},e.renderCardData=function(t){if(""!==t)return console.log(e.state.wikidata),r.a.createElement("div",{className:"otmAttractionCard",id:"otmAttractionCardLarge".concat(e.state.wikidata.xid)},r.a.createElement("h4",{className:"name"},e.state.wikidata.name),L(t.address),e.renderImage(t),e.renderWikipediaData(t.wikipedia_extracts))},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderCardData(this.state.wikidata))}}]),a}(n.Component),we=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={attractions:e.props.attractions,selectedOTMAttractionId:"",selectedOTMXid:""},e.renderAttractionsListingHeader=function(t){var a="",n="",o="",c="";return"user"===t?(a="User Attractions",c="listHeader userHeader",void 0!==e.props.attractions.length&&(n=e.props.attractions.length),o=e.toggleAttractionListHidden):(a="Historical Districts",c="listHeader otmHeader",n=void 0!==e.props.otmAttractions?e.props.otmAttractions.length:0,o=e.toggleOTMAttractionListHidden),r.a.createElement("div",{className:c,onClick:o},a," (",n,"):")},e.toggleAttractionListHidden=function(){var e=document.getElementById("attractionList");e.hidden=!e.hidden},e.toggleOTMAttractionListHidden=function(){var e=document.getElementById("otmAttractionList");e.hidden=!e.hidden},e.renderAttractionCards=function(){if(void 0!==e.props.attractions)return e.props.attractions.map((function(t){return t.id===e.props.attraction.id?r.a.createElement(Ee,{key:t.id,attraction:e.props.attraction}):r.a.createElement(me,{key:t.id,attraction:t,onClick:e.attractionCardClick})}))},e.renderOTMAttractionCards=function(){if(""!==e.props.otmAttractions&&void 0!==e.props.otmAttractions)return e.props.otmAttractions.map((function(t){return t.properties.xid===e.props.highlightAttractionId?r.a.createElement(Ae,{xid:t.properties.xid}):r.a.createElement(be,{attraction:t,onClick:e.otmAttractionCardClick})}))},e.attractionCardClick=function(t){e.props.getAttraction(t.id)},e.otmAttractionCardClick=function(t){e.props.highlightAttraction(t),M("otmIcon",t)},e.backToAttractionListClick=function(t){t.preventDefault(),e.setState({attractionCardLargeToRender:""})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"AttractionList"},this.renderAttractionsListingHeader("user"),r.a.createElement("div",{id:"attractionList",hidden:!0},this.renderAttractionCards()),this.renderAttractionsListingHeader("otm"),r.a.createElement("div",{id:"otmAttractionList"},this.renderOTMAttractionCards()))}}]),a}(n.Component),Ce=Object(d.b)((function(e){return{attractions:e.map.attractions,attraction:e.attraction.attraction,highlightAttractionId:e.map.highlightAttraction}}),{getAttraction:G,highlightAttraction:S})(we),ke=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={map:"",southWestBounds:"",northEastBounds:""},e.componentDidMount=function(){e.map=e.createMap(),e.attractionLayer=R.a.layerGroup().addTo(e.map),e.otmLayer=R.a.layerGroup().addTo(e.map)},e.renderAttractionMarkers=function(){if(e.attractionLayer.clearLayers(),e.props.attractions)return e.props.attractions.map((function(t){var a=t.lat,n=t.lng;return e.marker=R.a.marker([a,n],{icon:Y("".concat(t.name),"".concat(t.id))}),e.marker.on("click",e.handleMarkerClick),e.marker.id=t.id,e.marker.addTo(e.attractionLayer)}))},e.renderOTMMarkers=function(){if(e.otmLayer.clearLayers(),e.props.otmAttractions)return console.log(e.props.otmAttractions),e.props.otmAttractions.map((function(t){var a=t.properties.name,n=t.geometry.coordinates[0],r=t.geometry.coordinates[1],o=t.properties.xid,c=R.a.marker([r,n],{icon:J("".concat(a),"".concat(o))});return c.on("click",e.handleOTMMarkerClick),c.id=o,c.addTo(e.otmLayer)}))},e.handleMarkerClick=function(t){e.props.getAttraction(t.target.id);var a=document.getElementById("attractionList");a.hidden&&(a.hidden=!1),N(t.target.id),e.props.highlightAttraction(t.target.id)},e.handleOTMMarkerClick=function(t){console.log(t.target.id);var a=document.getElementById("otmAttractionList");a.hidden&&(a.hidden=!1),N(t.target.id),e.props.highlightAttraction(t.target.id),_("otmAttractionCardLarge".concat(t.target.id))},e.componentDidUpdate=function(t){t!==e.props&&(e.renderAttractionMarkers(e.state.map),e.renderOTMMarkers())},e.onMapChange=function(t){var a=t.target.getBounds();e.setState(Object(y.a)({},e.state,{southWestBounds:a._southWest,northEastBounds:a._northEast})),e.props.setBounds(a),e.renderOTMMarkers()},e.createMap=function(){var t=R.a.map("myMap").setView([33.74884399533138,-84.36997083332155],14);return R.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:20,minZoom:1,preferCanvas:!0,zoomSnap:1,zoomDelta:.1,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoidHlsZXJncmVhc29uIiwiYSI6ImNrOGVnbzc2ODE0dWczbG8xYXY5eWE4Y3IifQ.dvMx_fsMixzS0VfGmR-fsA"}).addTo(t),t.on("moveend",e.onMapChange),e.setState({map:t,southWestBounds:t.getBounds()._southWest,northEastBounds:t.getBounds()._northEast}),x(t),R.a.control.scale().addTo(t),e.props.setBounds(t.getBounds()),t},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Map"},r.a.createElement("div",{id:"myMap",className:"animated fadeIn map"}))}}]),a}(n.Component),Oe=Object(d.b)((function(e){return{attractions:e.map.attractions}}),{getAttraction:G,highlightAttraction:S})(ke),Te=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={bounds:"",attractions:"",otmAttractions:"",otmBoundsThreshold:5},e.setOTMAttractions=function(t){e.setState({otmAttractions:t})},e.queryOTMAttractions=function(t){e.checkBounds(t)?ve(t,e.setOTMAttractions):e.setState({otmAttractions:""})},e.setBounds=function(t){var a=e.parseBounds(t);e.props.getAttractions(a),e.setState({bounds:a}),e.queryOTMAttractions(a)},e.parseBounds=function(e){var t=e._southWest.wrap(),a=e._northEast.wrap();return console.log(t),{south:t.lat,north:a.lat,east:a.lng,west:t.lng}},e.checkBounds=function(t){return!(Math.abs(t.north)-Math.abs(t.south)>e.state.otmBoundsThreshold)||(console.log("Scroll in farther to see OTM data"),!1)},e.componentDidUpdate=function(t){t.attractions!==e.props.attractions&&e.setState({attractions:e.props.attractions})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ce,{attractions:this.state.attractions,otmAttractions:this.state.otmAttractions}),r.a.createElement(Oe,{attractions:this.state.attractions,otmAttractions:this.state.otmAttractions,setBounds:this.setBounds,parseBounds:this.parseBounds}))}}]),a}(n.Component),Ie=Object(d.b)((function(e){return{attractions:e.map.attractions}}),{getAttractions:function(e){return function(t){fetch("".concat(j,"/attractions"),{method:"GET",headers:{"Content-Type":"application/json",south:e.south,north:e.north,east:e.east,west:e.west}}).then((function(e){return console.log(e.status),console.log(e.body),e.json()})).then((function(e){console.log(e),t({type:"GET_ATTRACTIONS",attractions:e})})).catch((function(e){console.error("Error:",e)}))}}})(Te),je=a(21),Se=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={attractions:[],loggedIn:!1},e.componentDidMount=function(){e.props.getUser()},e.changeAppLoggedIn=function(t){e.setState({loggedIn:t})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(je.a,null,r.a.createElement(O,null),r.a.createElement("div",{id:"mainContainer"},r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/login",component:function(){return r.a.createElement(v,{changeAppLoggedIn:e.changeAppLoggedIn})}}),r.a.createElement(g.b,{path:"/logout",component:function(){return e.props.logout(),e.changeAppLoggedIn(!1),r.a.createElement(g.a,{to:"/"})}}),r.a.createElement(g.b,{path:"/signup",component:function(){return r.a.createElement(w,{changeAppLoggedIn:e.changeAppLoggedIn})}}),r.a.createElement(g.b,{path:"/about",render:function(){return r.a.createElement(T,null)}}),r.a.createElement(g.b,{path:"/myAttractions",render:function(){return r.a.createElement(C,{render:function(){return r.a.createElement($,null)}})}}),r.a.createElement(g.b,{path:"/myAccount",render:function(){return r.a.createElement(C,{render:function(){return r.a.createElement(ue,null)}})}}),r.a.createElement(g.b,{path:"/",render:function(){return r.a.createElement(Ie,null)}}))))}}]),a}(n.Component),Ne=Object(d.b)((function(e){return{loggedIn:e.loggedIn,user:e.user.user}}),{logout:h,getUser:te})(Se);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Me=a(15),_e={attractions:[],southWestBounds:"",northEastBounds:"",myAttractions:[],newAddress:{},highlightAttraction:""},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ATTRACTIONS":return Object(y.a)({},e,{attractions:t.attractions});case"GET_MY_ATTRACTIONS":case"DELETE_ATTRACTION":case"UPDATE_ATTRACTION":case"ADD_ATTRACTION":return Object(y.a)({},e,{myAttractions:t.myAttractions});case"UPDATE_USER":return Object(y.a)({},e);case"FILL_ATTRACTION_FORM":return Object(y.a)({},e,{newAddress:t.newAddress});case"SET_MAP":return Object(y.a)({},e,{map:t.map});case"HIGHLIGHT_ATTRACTION":return Object(y.a)({},e,{highlightAttraction:t.attractionId});default:return e}};var Be={loggedIn:!!localStorage.auth_token,user:""},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(y.a)({},e,{loggedIn:!0,user:t.user});case"LOGOUT":return Object(y.a)({},e,{loggedIn:!1,user:""});case"UPDATE_PASSWORD":return e;case"UPDATE_USER":return Object(y.a)({},e,{user:t.user});case"UPDATE_EMAIL":return Object(y.a)({},e,{user:Object(y.a)({},e.user,{email:t.email})});case"DELETE_USER":return Object(y.a)({},e,{loggedIn:!1,user:""});case"GET_USER":return Object(y.a)({},e,{user:t.user});default:return e}},Re={attraction:""},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ATTRACTION":case"ADD_REVIEW":case"DELETE_REVIEW":return Object(y.a)({},e,{attraction:t.attraction});case"SET_OTM_ATTRACTION_ID":return Object(y.a)({},e,{otmAttractionId:t.otmAttractionId});default:return e}},Ue=Object(Me.c)({map:Le,user:De,attraction:xe}),Pe=a(29),Fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Me.d,We=Object(Me.e)(Ue,void 0,Fe(Object(Me.a)(Pe.a)));c.a.render(r.a.createElement(d.a,{store:We},r.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.ace51095.chunk.js.map